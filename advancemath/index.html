<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Passport to Advanced Math Quiz</title>

<style>
body {
font-family: Arial, sans-serif;
background: linear-gradient(135deg,#667eea,#764ba2);
margin:0;
padding:20px;
}

.container {
max-width:800px;
margin:auto;
background:white;
border-radius:12px;
padding:20px;
}

.option {
border:1px solid #ccc;
padding:12px;
margin:6px 0;
cursor:pointer;
border-radius:8px;
}

.option.selected { background:#eef; }
.option.correct { background:#c8f7c5; }
.option.incorrect { background:#ffc9c9; }

button {
padding:12px;
margin-top:10px;
cursor:pointer;
width:100%;
}

.hidden { display:none; }

.feedback {
margin-top:10px;
padding:10px;
border-radius:6px;
}

.correctFB { background:#d4edda; }
.incorrectFB { background:#f8d7da; }
</style>
</head>

<body>

<div class="container">

<h2>Passport to Advanced Math</h2>

<div id="emailGate">
<input id="email" placeholder="Student email" style="width:100%;padding:10px">
<button onclick="start()">Start Quiz</button>
</div>

<div id="quiz" class="hidden"></div>

<div id="results" class="hidden"></div>

</div>

<script>

const WEB_APP_URL = "https://script.google.com/macros/s/AKfycbwWARUOETKeW8bV_sjxuh8nVz9lIHTAjAZIyQb4anZoVfbqIeH69S_vpGtDA4DpL4ZquQ/exec";

const questions = [

{
q:`−2x(5x + 1) + 6(5x + 1) = ax² + bx + c

What is b?`,
options:["−28","28","8","−8"],
correct:1,
exp:"Expand → −10x² + 28x + 6 → b = 28"
},

{
q:`(1/20)x² − 200 + c = 1400 when x=200

Find c.`,
options:["−400","−200","200","400"],
correct:0,
exp:"p(200)=1800+c=1400 → c=−400"
},

{
q:`(2 + 6i)(1 − 4i)

Find the real part.`,
options:["−26","26","−22","22"],
correct:1,
exp:"Multiply → 26 − 2i → real part = 26"
},

{
q:`x² − 12x + 27 = 3x + 1

Sum of solutions?`,
options:["−15","−12","12","15"],
correct:3,
exp:"x² − 15x + 26=0 → sum=15"
},

{
q:`h(t)=−16t²+2kt+3

Vertex at t=4 → find k.`,
options:["128","64","8","4"],
correct:1,
exp:"Vertex k/16=4 → k=64"
},

{
q:`|x−3|=|3x−5|

Solution set?`,
options:["{1}","{2}","{1,2}","None"],
correct:2,
exp:"Square → x²−3x+2=0 → x=1,2"
},

{
q:`kx²+6x+9=0 has one solution

Find k.`,
options:["1","2","3","4"],
correct:0,
exp:"Discriminant=0 → k=1"
},

{
q:`Shift f(x) right 12 and down 4

h(x)=?`,
options:[
"f(x+12)-4",
"f(x-12)-4",
"f(x-12)+4",
"f(x+12)+4"
],
correct:1,
exp:"Right → x−12, down → −4"
},

{
q:`x-intercepts: −5, −3, 0, 1, 2

Which polynomial?`,
options:[
"x(x−5)(x−3)(x+1)(x+2)",
"x(x+5)(x+3)(x−1)(x−2)",
"x(x−5)(x+3)(x−1)(x−2)",
"x(x+5)(x−3)(x+1)(x−2)"
],
correct:1,
exp:"Factor form matches intercepts"
},

{
q:`(x−3)(x−7)=0

Solutions?`,
options:["3","7","3 and 7","none"],
correct:2,
exp:"Zero product → 3,7"
}

];

let i=0,score=0,answers=[],email="";

function start(){
email=document.getElementById("email").value;
if(!email) return alert("Enter email");
document.getElementById("emailGate").classList.add("hidden");
document.getElementById("quiz").classList.remove("hidden");
render();
}

function render(){
const q=questions[i];
let html=`<h3>Question ${i+1}</h3><p>${q.q.replace(/\n/g,"<br>")}</p>`;
q.options.forEach((o,n)=>{
html+=`<div class="option" onclick="pick(${n})">${o}</div>`;
});
html+=`<div id="fb"></div>`;
document.getElementById("quiz").innerHTML=html;
}

let sel=null;

function pick(n){
sel=n;
document.querySelectorAll(".option").forEach((e,j)=>{
e.classList.toggle("selected",j===n);
});
check();
}

function check(){
const q=questions[i];
const fb=document.getElementById("fb");
let correct=sel===q.correct;

answers.push({q:i+1,chosen:sel,correct});

if(correct){
score++;
fb.innerHTML=`<div class="feedback correctFB">✓ ${q.exp}</div>`;
}else{
fb.innerHTML=`<div class="feedback incorrectFB">✗ ${q.exp}</div>`;
}

document.querySelectorAll(".option").forEach((e,j)=>{
if(j===q.correct) e.classList.add("correct");
if(j===sel && !correct) e.classList.add("incorrect");
e.onclick=null;
});

setTimeout(next,1200);
}

function next(){
i++;
if(i<questions.length) render();
else finish();
}

function finish(){
document.getElementById("quiz").classList.add("hidden");
document.getElementById("results").classList.remove("hidden");

const percent=Math.round(score/questions.length*100);

document.getElementById("results").innerHTML=`
<h3>Quiz Complete</h3>
<p>${score}/${questions.length} (${percent}%)</p>
<button onclick="save()">Save Result</button>
`;

}

async function save(){

const payload={
timestamp:new Date().toISOString(),
email,
score,
total:questions.length,
percentage:Math.round(score/questions.length*100),
answers
};

await fetch(WEB_APP_URL,{
method:"POST",
mode:"no-cors",
headers:{"Content-Type":"text/plain"},
body:JSON.stringify(payload)
});

alert("Saved to Google Sheet!");
}

</script>
</body>
</html>
